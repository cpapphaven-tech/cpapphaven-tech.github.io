<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Football 3D - PlayMixGames</title>

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cannon.js/0.6.2/cannon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Project Scripts -->
    <script src="../ads.js"></script>
    <script type="module" src="../analytics.js"></script>
    <script defer src="game.js"></script>

    <!-- Cookie Consent Script -->
    <script>
        (function() {
            const CONSENT_KEY = 'play-mix-games-cookie-consent';
            function getCookieConsent() {
                const stored = localStorage.getItem(CONSENT_KEY);
                return stored ? JSON.parse(stored) : null;
            }
            function showCookieBanner() {
                const consent = getCookieConsent();
                if (!consent) {
                    const banner = document.getElementById('cookie-consent');
                    if (banner) banner.classList.remove('hidden');
                }
            }
            function acceptCookies() {
                const consent = {accepted: true, timestamp: new Date().toISOString()};
                localStorage.setItem(CONSENT_KEY, JSON.stringify(consent));
                document.getElementById('cookie-consent')?.classList.add('hidden');
                window.cookieConsent = true;
                console.log('‚úÖ Cookie consent accepted');
            }
            function declineCookies() {
                const consent = {accepted: false, timestamp: new Date().toISOString()};
                localStorage.setItem(CONSENT_KEY, JSON.stringify(consent));
                document.getElementById('cookie-consent')?.classList.add('hidden');
                window.cookieConsent = false;
                console.log('‚ùå Cookie consent declined');
            }
            document.addEventListener('DOMContentLoaded', function() {
                document.getElementById('cookie-accept')?.addEventListener('click', acceptCookies);
                document.getElementById('cookie-decline')?.addEventListener('click', declineCookies);
                setTimeout(showCookieBanner, 500);
            });
            window.cookieConsent = getCookieConsent()?.accepted ?? null;
        })();
    </script>

    <!-- Styling -->
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2e7d32">
    <link rel="apple-touch-icon" href="../icons/icon-192x192.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&display=swap" rel="stylesheet">

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            setTimeout(() => {
                 if (window.DEV_MODE) {
                    return;
                }
                loadSocialBarAd();
            }, 2000);
        });
    </script>
</head>

<body>
    <!-- Cross-Promotion scroller will appear in Game Over -->

    <!-- Full Leaderboard -->
    <div id="full-leaderboard" class="overlay hidden">
        <div class="lb-close-x" onclick="closeFullLeaderboard()">‚úï</div>
        <div class="lb-header">
            <h2>üèÜ GOAL CHAMPION üèÜ</h2>
            <p>Top 20 Worldwide</p>
        </div>
        <div class="lb-scroll-area">
            <ul id="full-lb-list"></ul>
        </div>
        <button onclick="closeFullLeaderboard()" class="close-btn">Close</button>
    </div>

    <!-- Side Leaderboard -->
    <div id="side-leaderboard" class="visible">
        <h3>üèÜ GOAL CHAMPION üèÜ</h3>
        <ul id="side-lb-list"></ul>
        <div id="view-full-lb">üèÜ Global Top 20</div>
    </div>

    

<div id="tutorial-overlay" class="hidden">
  <div id="tutorial-dialog">

    <div id="tutorial-inner">

      <div id="tutorial-video-container">
        <video id="tutorial-video" muted autoplay playsinline preload="auto">
          <source src="../assets/football3dvideo.mp4" type="video/mp4">
        </video>
      </div>

      <div id="tutorial-text">
        <h3>üéÆ How to Play</h3>
         <p>üëá Swipe to aim your kick</p>
         <p>üéØ Shoot into the goal!</p>
      </div>


    </div>
  </div>
</div>

<div id="party-welcome" class="hidden">
  <div id="party-text">üéâ Welcome!</div>
  <canvas id="confetti-canvas"></canvas>
</div>

    <div id="game-wrapper">
        <canvas id="game-canvas"></canvas>
        <!-- UI Overlay -->
        <div id="ui-container">
            <div id="score-container">
                <h1 id="score">0</h1>
            </div>

            <div id="goal-feedback" class="hidden">GOAL IT!</div>

            <!-- Challenge Message -->
            <div id="challenge-message" class="hidden">
                <div class="challenge-emoji">‚öΩ</div>
                <div class="challenge-text">Can you score at least<br>10 goals on net?</div>
                <div class="challenge-subtext">Let's go! üî•</div>
            </div>

            <div id="swipe-guide" class="visible">
                <div class="swipe-hand">üëÜ</div>
                <p>SWIPE UP TO KICK!</p>
            </div>

            <div id="main-menu" class="overlay hidden">
                <h2 id="title">FOOTBALL 3D</h2>
                <p id="prompt">‚öΩ Swipe up to kick toward the goal!</p>
                <button id="start-btn">KICK OFF</button>
            </div>

            <div id="game-over" class="overlay hidden">
                <h2>STRIKE OVER!</h2>
                <p>Goals: <span id="final-score">0</span></p>
                <p>Best: <span id="best-score">0</span></p>

                <div id="gameover-input-area" style="margin: 15px 0; width: 80%;">
                    <input id="player-name-gameover" placeholder="Enter Name" maxlength="12">
                    <button id="submit-score-btn">Submit Score</button>
                </div>

                <button id="bonus-btn" class="hidden">üéÅ Watch Ad & Get +1 Life</button>
                <button id="restart-btn">Try Again</button>
                <!-- <button id="share-tg-btn">üì∏ Share Your Best Goal</button> -->
                <button id="join-tg-btn" class="join-tg-btn">üèÜ Top 20 Leaderboard</button>

                <!-- Game Scroller Container -->
                <div id="game-over-scroller"></div>
            </div>
        </div>
    </div>

    <!-- COOKIE CONSENT BANNER -->
    <!-- <div id="cookie-consent" class="cookie-banner hidden">
        <div class="cookie-content">
            <div class="cookie-text">
                <span class="cookie-icon">üç™</span>
                <span>We use cookies & tracking for ads. <a href="../privacy.html" target="_blank" style="color: #4caf50; text-decoration: underline;">Learn more</a></span>
            </div>
            <div class="cookie-buttons">
                <button id="cookie-accept" class="cookie-btn cookie-btn-accept">Accept</button>
                <button id="cookie-decline" class="cookie-btn cookie-btn-decline">Decline</button>
            </div>
        </div>
    </div> -->

    <!-- RIGHT SIDE ADSTERRA BANNER (Desktop Only) -->
    <div id="adsterra-banner"></div>

    <!-- SEMANTIC DESCRIPTION FOR SEO -->
    <section class="game-description" style="margin-top: 250px;">
        <h2 style="color: #fff; margin-bottom: 20px;">Master the Perfect Strike</h2>
        <p>Football 3D brings the thrill of the penalty shootout to your browser. Use your skill and timing to beat the
            goalkeeper and score as many goals as possible. Each successful goal increases the difficulty, with the
            goalkeeper moving faster to block your shots.</p>

        <h3 style="color: #fff; margin: 30px 0 15px;">How to Play</h3>
        <ul style="list-style-position: inside; margin-bottom: 30px;">
            <li><strong>Kick:</strong> Swipe up or click and drag upward to kick the ball.</li>
            <li><strong>Aim:</strong> The direction of your swipe determines where the ball goes.</li>
            <li><strong>Challenge:</strong> Avoid the moving obstacle blocking the net!</li>
        </ul>

        <div style="text-align: center; margin-top: 50px;">
            <a href="../index.html" style="color: #4caf50; text-decoration: none; font-weight: bold;">‚Üê Back to
                Portal</a>
        </div>
    </section>

    <footer>
        <div class="footer-links" style="text-align:center; padding: 40px;">
            <a href="../privacy.html" style="color: #666; text-decoration: none; margin: 0 10px;">Privacy</a>
            <a href="../terms.html" style="color: #666; text-decoration: none; margin: 0 10px;">Terms</a>
        </div>
    </footer>

    <div id="bottom-bar">


        <a href="../index.html" id="home-btn">üéÆ More Games</a>
    </div>


    <!-- BOTTOM BANNER AD -->
    <div id="bottom-ad"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {

            const container = document.getElementById("bottom-ad");

            function loadBanner() {
                if (typeof shouldLoadAds === "function" && !shouldLoadAds()) {
                    console.log("üöß [ADS] Banner skipped");
                    return;
                }

                if (!container) {
                    console.log("‚ùå bottom-ad container missing");
                    return;
                }

                container.innerHTML = '<div id="banner-slot"></div>';
                const slot = document.getElementById("banner-slot");

                window.atOptions = {
                    key: "de617c07128b585ef939154460e6858f",
                    format: "iframe",
                    height: 50,
                    width: 320,
                    params: {}
                };

                const s = document.createElement("script");
                s.src = "https://www.highperformanceformat.com/de617c07128b585ef939154460e6858f/invoke.js";
                slot.appendChild(s);

                console.log("‚úÖ Banner loaded");
            }
            
            if (window.DEV_MODE) {
                return;
            }
            setTimeout(loadBanner, 2000);

        });
    </script>


</body>

</html>