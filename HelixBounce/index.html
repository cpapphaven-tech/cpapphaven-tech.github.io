<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helix Bounce - PlayMixGames</title>
    <link rel="stylesheet" href="../portal-style.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style_additions.css">
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Cannon.js (Physics) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cannon.js/0.6.2/cannon.min.js"></script>
    <script type="module" src="../analytics.js"></script>
    <script src="../ads.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" onload="console.log('‚úÖ Supabase script loaded')"
        onerror="console.error('‚ùå Supabase failed to load')">
        </script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js"></script>

    <!-- Load Ads Using Professional Control System -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            setTimeout(() => {
                loadSocialBarAd();

                if (window.trackAdImpression) {
                    trackAdImpression("helix_socialbar");
                }

            }, 2000);
        });
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&display=swap" rel="stylesheet" media="print"
        onload="this.media='all'">
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&display=swap" rel="stylesheet">
    </noscript>


    <link rel="preload" href="game.js" as="script">

    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="../icons/icon-192x192.png">
</head>

<body>
    <!-- HEADER REMOVED to match Stack 3D Clean Look -->
    <!--
    <header>
        <a href="../index.html" class="logo">PlayMixGames</a>
        <nav>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../about.html">About</a></li>
            </ul>
        </nav>
    </header>
    -->

    <!-- Dedicated Full Leaderboard Screen -->
    <div id="full-leaderboard" class="overlay hidden">
        <div class="lb-close-x" onclick="closeFullLeaderboard()">‚úï</div>
        <div class="lb-header">
            <h2>üèÜ Global Leaderboard</h2>
            <p>Top 20 Players Worldwide</p>
        </div>
        <div class="lb-scroll-area">
            <ul id="full-lb-list"></ul>
        </div>
        <button onclick="closeFullLeaderboard()" class="close-btn">Close</button>
    </div>

    <!-- Side Background Leaderboard (Compact Mini-Box) -->
    <div id="side-leaderboard" class="visible">
        <h3>Top Leaders</h3>
        <ul id="side-lb-list"></ul>
        <div id="view-full-lb">üèÜ Global Top 20</div>
    </div>


    <main class="game-container">


        <h1>Helix Bounce</h1>

        <div id="game-ui">
            <div id="level">Level 1</div>
            <div id="score">0</div>

            <div id="main-menu" class="overlay hidden"> <!-- Hidden by default for auto-start -->
                <h2>HELIX BOUNCE</h2>
                <p>Rotate the tower to fall through the gaps!</p>
                <button id="resume-btn" class="hidden">Resume Level <span id="resume-level">1</span></button>
                <button id="start-btn">Start New Game</button>
            </div>

            <div id="game-over" class="overlay hidden">
                <h2>CRASHED!</h2>

                <!-- Name Input for Leaderboard -->
                <div id="gameover-input-area" style="margin: 15px 0; width: 90%;">
                    <input id="player-name-gameover" placeholder="Enter Name for Leaderboard" maxlength="12" style="
                        width: 100%;
                        padding: 10px;
                        border-radius: 8px;
                        border: 1px solid rgba(255,255,255,0.3);
                        background: rgba(0,0,0,0.3);
                        color: white;
                        text-align: center;
                        margin-bottom: 5px;
                    ">
                    <button id="submit-score-btn"
                        style="background: linear-gradient(135deg, #4d79ff, #3366ff); border:none; width:100%; padding: 10px;">Submit
                        & Save Level</button>
                </div>

                <button id="restart-btn">Try Again</button>

                <!-- REWARDED SMARTLINK -->
                <button id="bonus-btn" class="bonus-btn">
                    üéÅ Watch Ad & Get +1 Life
                </button>

                <button id="next-level-btn" class="hidden">Next Level</button>

                <button id="join-tg-btn" class="join-tg-btn">
                    üöÄ Join Telegram Leaderboard
                </button>

                <!-- Game Scroller Container -->
                <div id="game-over-scroller"></div>
            </div>

            <canvas id="game-canvas"></canvas>
        </div>

        <section class="game-description">
            <h2>About Helix Bounce</h2>
            <p>Helix Bounce is a thrilling arcade experience where precision and reflexes are your best allies. Navigate
                a bouncing ball through a series of rotating platforms, aiming for the gaps to descend deeper into the
                tower. But be warned: touching the colored "death zones" will end your run instantly!</p>

            <p>Designed with smooth 3D physics and vibrant visuals, Helix Bounce offers an addictive "just one more go"
                gameplay loop. As you progress, the speed increases and the gaps become narrower, testing even the most
                seasoned arcade players. How deep can you go?</p>

            <h3>How to Play</h3>
            <ul>
                <li><strong>Rotate Tower:</strong> Click and drag (Desktop) or swipe (Mobile) horizontally to rotate the
                    helix tower.</li>
                <li><strong>Avoid Red Zones:</strong> Landing on a red segment will result in a game over.</li>
                <li><strong>Score Points:</strong> Each floor you pass through increases your score. Clear multiple
                    levels in a single jump for a combo bonus!</li>
            </ul>
        </section>
    </main>

    <footer>
        <div class="footer-links">
            <a href="../index.html">Home</a>
            <a href="../privacy.html">Privacy Policy</a>
        </div>
        <p class="copyright">&copy; 2026 PlayMixGames.</p>
    </footer>

    <script defer src="game.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js');
            });
        }
    </script>

    <!-- Cross-Promotion scroller will appear in Game Over -->

    <!-- RIGHT SIDE ADSTERRA BANNER (Desktop Only) -->
    <div id="adsterra-banner">
        <!-- Script will be injected here by game.js after 2s -->
    </div>


    <div id="bottom-bar">
        <a href="https://t.me/playmixgameshelixballgame" id="tg-btn" target="_blank" rel="noopener">
            <span class="tg-icon">‚úàÔ∏è</span>
            <span class="tg-text">
                Join our Playmix Games Telegram Group<br>
                Share score, compete on leaderboard
            </span>
        </a>

        <a href="../index.html" id="home-btn">üéÆ More Games</a>
    </div>


    <!-- BOTTOM FIXED AD -->
    <div id="bottom-ad">
        <script>
            atOptions = {
                'key': 'de617c07128b585ef939154460e6858f',
                'format': 'iframe',
                'height': 50,
                'width': 320,
                'params': {}
            };
        </script>
        <script src="https://www.highperformanceformat.com/de617c07128b585ef939154460e6858f/invoke.js"></script>
    </div>




</body>

</html>