<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üß™ Water Sort Puzzle 3D - Addictive Color Sorting Game | PlayMixGames</title>
    <meta name="description"
        content="Sort the colored water in the tubes until all colors are in the same tube. A relaxing and challenging 3D puzzle game for your brain!">
    <link rel="stylesheet" href="style.css">

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6129521314653726"
        crossorigin="anonymous"></script>

    <script type="module" src="../analytics.js"></script>

    <!-- Load Ads Script -->
    <script src="../ads.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // loadSocialBarAd();
            if (typeof renderTopRightScroller === 'function') {
                renderTopRightScroller();
            }
        });
    </script>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- GSAP for animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
</head>

<body>
    <!-- Header -->
    <header>
        <a href="../index.html" class="back-btn">‚Üê PlayMixGames</a>
        <h1 class="game-title">üß™ Water Sort 3D</h1>
        <div class="level-display">
            LEVEL <span id="current-level">1</span>
        </div>
    </header>

     <!-- RIGHT SIDE ADSTERRA BANNER (Desktop Only) -->
    <div id="adsterra-banner">
        <!-- Script will be injected here by game.js after 2s -->
    </div>

    <!-- Game Container -->
    <div id="game-container">

        <!-- Instructions Panel (Left Side) -->
        <div id="instructions-panel">
            <div class="panel-content">
                <h2 class="panel-title">üíß Water Sort 3D</h2>
                <h3 class="panel-subtitle">Color Sorting Puzzle</h3>

                <div class="instructions-section">
                    <h4>How to Play</h4>
                    <div class="instruction-item">
                        <span class="instruction-icon">üëÜ</span>
                        <div class="instruction-text">
                            <strong>Tap a Tube</strong><br>
                            <small>Select to pour water</small>
                        </div>
                    </div>
                    <div class="instruction-item">
                        <span class="instruction-icon">üß™</span>
                        <div class="instruction-text">
                            <strong>Match Colors</strong><br>
                            <small>Pour same color on top</small>
                        </div>
                    </div>
                    <div class="instruction-item">
                        <span class="instruction-icon">‚ú®</span>
                        <div class="instruction-text">
                            <strong>Sort It All</strong><br>
                            <small>One color per tube to win!</small>
                        </div>
                    </div>
                </div>

                <div class="tips-section">
                    <h4>Pro Tips</h4>
                    <p>‚Ä¢ Plan your moves ahead</p>
                    <p>‚Ä¢ Use empty tubes wisely</p>
                </div>
            </div>
        </div>

        <!-- Game Area (Canvas) -->
        <canvas id="game-canvas"></canvas>

        <!-- Bottom Controls -->
        <div id="game-controls">
            <button id="restart-btn" class="control-btn" title="Restart Level">
                <span class="icon">üîÑ</span>
                <span class="label">Restart</span>
            </button>
            <button id="undo-btn" class="control-btn" title="Undo Move">
                <span class="icon">‚Ü©Ô∏è</span>
                <span class="label">Undo</span>
            </button>
        </div>

        <!-- Undo Confirmation Modal -->
        <div id="undo-modal" class="overlay-screen hidden" style="z-index: 2000;">
            <div class="screen-content" style="max-width: 320px;">
                <h2 class="title-main" style="font-size: 1.8rem;">Undo Move?</h2>
                <p style="margin-bottom: 20px; color: #ccc;">Watch a short ad to undo your last move.</p>
                <div class="button-group" style="display: flex; gap: 10px; justify-content: center;">
                    <button id="cancel-undo-btn" class="game-btn"
                        style="background: #444; font-size: 0.9rem; padding: 10px 20px;">Cancel</button>
                    <button id="confirm-undo-btn" class="game-btn primary-btn"
                        style="font-size: 0.9rem; padding: 10px 20px;">
                        Watch üì∫
                    </button>
                </div>
            </div>
        </div>

        <!-- Level Complete Screen -->
        <div id="level-complete-screen" class="overlay-screen hidden">
            <div class="screen-content">
                <h1 class="title-main">Level Complete!</h1>
                <h2 class="title-sub">Outstanding Sorting! üß™</h2>
                <div class="stars-container">
                    <span>‚≠ê</span><span>‚≠ê</span><span>‚≠ê</span>
                </div>
                <button id="next-level-btn" class="game-btn primary-btn">
                    Next Level
                </button>
            </div>
        </div>

    </div>

    <!-- Bottom Banner Ad -->
    <div id="bottom-ad">
        <script>
            (function () {

                const container = document.getElementById("bottom-ad");

                function loadBanner() {
                    if (typeof shouldLoadAds === "function" && !shouldLoadAds()) {
                        console.log("üöß [ADS] Banner skipped");
                        return;
                    }

                    if (!container) return;

                    // Create inner ad wrapper (safe clear)
                    container.innerHTML = '<div id="banner-slot"></div>';
                    const slot = document.getElementById("banner-slot");

                    window.atOptions = {
                        key: "de617c07128b585ef939154460e6858f",
                        format: "iframe",
                        height: 50,
                        width: 320,
                        params: {}
                    };

                    const s = document.createElement("script");
                    s.src = "https://www.highperformanceformat.com/de617c07128b585ef939154460e6858f/invoke.js";
                    slot.appendChild(s);

                }

                if (window.DEV_MODE) {
                    return;
                }
                // Initial load
                setTimeout(loadBanner, 100);



            })();
        </script>
    </div>

    <!-- SEO: About Game & How to Play Section -->
    <section id="game-info" style="background: #f8f9fa; padding: 40px 20px; margin-top: 40px; text-align: center;">
        <div style="max-width: 900px; margin: 0 auto;">
            <h2 style="font-size: 2rem; color: #333; margin-bottom: 20px;">üíß About Water Sort 3D</h2>
            <p style="font-size: 1.1rem; color: #555; line-height: 1.6; margin-bottom: 30px;">
                Water Sort 3D is a relaxing color-sorting puzzle game inspired by the viral Water Sort Puzzle. Pour water between tubes 
                to organize colors and complete challenging levels. With hundreds of levels and increasingly complex puzzles, 
                this game offers endless brain-teasing fun for all ages. Perfect for unwinding while exercising your logic skills.
            </p>
            
            <h3 style="font-size: 1.5rem; color: #333; margin-bottom: 15px;">üéÆ How to Play</h3>
            <ul style="font-size: 1rem; color: #555; text-align: left; display: inline-block; line-height: 2; margin-bottom: 60px;">
                <li>‚úÖ Tap tubes to pour water between containers</li>
                <li>‚úÖ Sort colors so each tube contains only one color</li>
                <li>‚úÖ Use empty tubes to help organize and separate colors</li>
                <li>‚úÖ Avoid mixing colors incorrectly or use undo moves</li>
                <li>‚úÖ Complete all levels to master the water sorting challenge</li>
            </ul>
        </div>
    </section>

    <script src="game.js"></script>
</body>

</html>