<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Early Tracking Script -->
    <script>
        (function () {
            const anonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJqcGdvdmZ6b25sbWpycnVhc3BwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAyNjA0MDQsImV4cCI6MjA4NTgzNjQwNH0.fwBaiOgXtnQVgq0IOdPmOskQHDqgOWWqr0mm3PSu57I";
            const endpoint = "https://bjpgovfzonlmjrruaspp.supabase.co/functions/v1/collect";

            const urlParams = new URLSearchParams(window.location.search);
            const placementId = urlParams.get('utm_content') || urlParams.get('placementid');

            const hitData = {
                timestamp: new Date().toISOString(),
                url: location.href,
                referrer: document.referrer,
                userAgent: navigator.userAgent,
                screen: { width: screen.width, height: screen.height },
                loadStage: "pre-init",
                placement_id: placementId
            };

            const sendHit = (stage) => {
                hitData.loadStage = stage;
                hitData.timestamp = new Date().toISOString();
                fetch(endpoint, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "apikey": anonKey,
                        "Authorization": "Bearer " + anonKey
                    },
                    body: JSON.stringify(hitData),
                    keepalive: true
                });
            };

            sendHit("pre-init");

            window.addEventListener("pagehide", function () {
                if (!window.FIREBASE_INITIALIZED) {
                    sendHit("early-exit");
                }
            });
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Word Search Explorer - Play Free Online | PlayMixGames</title>
    <meta name="description"
        content="Find hidden words in this addictive Word Search puzzle. Explore new themes, challenge your brain, and enjoy unlimited levels on PlayMixGames!">
    <link rel="stylesheet" href="style.css">

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6129521314653726"
        crossorigin="anonymous"></script>

    <script type="module" src="../analytics.js"></script>
    <script src="../ads.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            loadSocialBarAd();
            renderTopRightScroller();
        });
    </script>

</head>

<body>
    <!-- Header -->
    <header>
        <a href="../index.html" class="back-btn">‚Üê PlayMixGames</a>
        <h1 class="game-title">WORD SEARCH</h1>
        <div class="level-display">
            LVL <span id="current-level">1</span>
        </div>
    </header>

    <!-- RIGHT SIDE ADSTERRA BANNER (Desktop Only) -->
    <div id="adsterra-banner">
        <!-- Script will be injected here by game.js after 2s -->
    </div>

    <!-- Game Container -->
    <div id="game-container">

        <div id="theme-display">
            <div id="theme-label">Current Theme</div>
            <div id="theme-name">ANIMALS</div>
        </div>

        <!-- The Grid -->
        <div id="word-grid">
            <canvas id="highlight-canvas"></canvas>
            <!-- Cells generated by JS -->
        </div>

        <!-- Word List -->
        <div id="word-list">
            <!-- Words generated by JS -->
        </div>

        <!-- Controls -->
        <div id="controls">
            <button id="hint-btn" class="control-btn" title="Hint">üí°</button>
            <button id="reset-btn" class="control-btn" title="Reset Level">üîÑ</button>
        </div>

        <!-- Level Complete Screen -->
        <div id="level-complete-screen" class="overlay-screen hidden">
            <div class="screen-content">
                <h1 style="color: var(--h-green); font-size: 2rem; margin-bottom: 10px;">FOUND IT!</h1>
                <p style="color: #ccc; margin-bottom: 20px;">You are becoming wiser!</p>
                <div style="font-size: 3rem; margin-bottom: 20px;">üéì</div>
                <button id="next-level-btn" class="game-btn">
                    Next Exploration
                </button>
            </div>
        </div>

    </div>

    <!-- Bottom Banner Ad -->
    <div id="bottom-ad">
        <script>
            (function () {

                const container = document.getElementById("bottom-ad");

                function loadBanner() {
                    if (typeof shouldLoadAds === "function" && !shouldLoadAds()) {
                        console.log("üöß [ADS] Banner skipped");
                        return;
                    }

                    if (!container) return;

                    // Create inner ad wrapper (safe clear)
                    container.innerHTML = '<div id="banner-slot"></div>';
                    const slot = document.getElementById("banner-slot");

                    window.atOptions = {
                        key: "de617c07128b585ef939154460e6858f",
                        format: "iframe",
                        height: 50,
                        width: 320,
                        params: {}
                    };

                    const s = document.createElement("script");
                    s.src = "https://www.highperformanceformat.com/de617c07128b585ef939154460e6858f/invoke.js";
                    slot.appendChild(s);

                }

                if (window.DEV_MODE) {
                    return;
                }
                // Initial load
                setTimeout(loadBanner, 2000);



            })();
        </script>
    </div>

    <!-- SEO: About Game & How to Play Section -->
    <section id="game-info" style="background: #f8f9fa; padding: 40px 20px; margin-top: 40px; text-align: center;">
        <div style="max-width: 900px; margin: 0 auto;">
            <h2 style="font-size: 2rem; color: #333; margin-bottom: 20px;">üîç About Word Search</h2>
            <p style="font-size: 1.1rem; color: #555; line-height: 1.6; margin-bottom: 30px;">
                Word Search is a classic word puzzle game where you find hidden words in a grid of letters arranged
                horizontally, vertically,
                or diagonally. Perfect for improving vocabulary and concentration, Word Search offers relaxing gameplay
                for all ages.
                With themed puzzles ranging from animals to geography, science to pop culture, there's always a new
                challenge to discover.
            </p>

            <h3 style="font-size: 1.5rem; color: #333; margin-bottom: 15px;">üéÆ How to Play</h3>
            <ul
                style="font-size: 1rem; color: #555; text-align: left; display: inline-block; line-height: 2; margin-bottom: 60px;">
                <li>‚úÖ Find all hidden words in the grid</li>
                <li>‚úÖ Words can be horizontal, vertical, or diagonal</li>
                <li>‚úÖ Words can read forward or backward</li>
                <li>‚úÖ Click or drag to highlight found words</li>
                <li>‚úÖ Complete the puzzle to find all words in the list</li>
            </ul>
        </div>
    </section>

    <script src="game.js"></script>
</body>

</html>